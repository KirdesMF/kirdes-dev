<div data-lens class="fixed size-lens-radius top-0 left-0 rounded-full z-10 pointer-events-none">
  <svg viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg" class="size-full overflow-visible">
    <circle cx="50" cy="50" r="50" class="stroke-current fill-none" stroke-width="0.75"></circle>
    <line x1="50" y1="48" x2="50" y2="52" class="stroke-current" stroke-linecap="round" stroke-width="0.75"></line>
    <line x1="48" y1="50" x2="52" y2="50" class="stroke-current" stroke-linecap="round" stroke-width="0.75"></line>
  </svg>
</div>

<script>
  import { gsap } from "gsap";

  const root = document.documentElement;
  const lens = document.querySelector<HTMLDivElement>("[data-lens]");

  if (!lens) throw new Error("Lens element not found");

  function onMove(event: MouseEvent) {
    const x = event.clientX;
    const y = event.clientY;

    // Animer la lens avec GSAP
    gsap.to(lens, {
      x: x,
      y: y,
      xPercent: -50,
      yPercent: -50,
      duration: 0.3,
      ease: "power2.out",
    });

    root.style.setProperty("--mouse-x", `${x}px`);
    root.style.setProperty("--mouse-y", `${y}px`);
  }

  document.addEventListener("mousemove", onMove, { passive: true });
</script>
